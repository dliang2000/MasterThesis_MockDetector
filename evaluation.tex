%======================================================================
\chapter{Evaluation}
%====================================================================== 

\begin{table*}
	\centering
	\caption{Our suite of 8 open-source benchmarks (8000--117000 LOC) plus our microbenchmark. Soot and Doop analysis runtimes.}
	%	\begin{adjustbox}{width=0.1\textwidth}
	\begin{tabular}{lrrrrrr}
		\toprule
		Benchmark & Total LOC & Test LOC & \thead{Soot intraproc \\ total time (s)} & \thead{Doop intraproc \\ total time (s)} & \thead{Soot intraproc \\ mock analysis (s)}  & \thead{Doop intraproc \\ mock analysis (s)} \\
		\midrule
		bootique-2.0.B1-bootique           		&  15530   & 8595   & 58  & 3499  &  0.293   & 16.81       \\
		commons-collections4-4.4           		&  65273   & 36318  & 114 & 537   &  0.345   & 12.26       \\
		flink-core-1.13.0-rc1           		&  117310  & 49730  & 341 & 1775  &  0.358   & 25.30        \\
		jsonschema2pojo-core-1.1.1         		&  8233    & 2885   & 313 & 835   &  0.282   & 26.27       \\
		maven-core-3.8.1   		           		&  38866   & 11104  & 183 & 564   &  0.192   & 16.34        \\
		micro-benchmark         		  		&  954     & 883	& 47  & 283   &  0.126   & 10.50        \\
		mybatis-3.5.6         		  			&  68268   & 46334  & 500 & 4247  &  0.524   & 51.25        \\
		quartz-core-2.3.1        	  			&  35355   & 8423   & 155 & 702   &  0.215   & 19.83     \\
		vraptor-core-3.5.5         	  			&  34244   & 20133  & 371 & 1547  &  0.340   & 23.81      \\
		\bottomrule
		Total         	  						&  384033  & 184405 & 2082 & 13989 &  2.675  & 202.37     \\
	\end{tabular}
	%	\end{adjustbox}
	\label{tab:runtimes}
\end{table*}

\begin{table*}
	\centering
	\caption{Counts of Test-Related (Test/Before/After) methods in public concrete test classes, along with counts of mocks, mock-containing arrays, and mock-containing collections, reported by Soot intraprocedural analysis.}
	%	\begin{adjustbox}{width=0.1\textwidth}
	\begin{tabular}{lrrrr}
		\toprule
		Benchmark & \thead{\# of Test-Related \\ Methods} & \thead{\# of Test-Related \\ Methods with \\ mocks (intra)}  & \thead{\# of Test-Related \\ Methods with \\ mock-containing\\ arrays (intra)} & \thead{\# of Test-Related \\ Methods with \\ mock-containing\\ collections (intra)} \\
		\midrule
		bootique-2.0.B1-bootique           		&  420        &  32  & 7 & 0       \\
		commons-collections4-4.4          		&  1152       &  3   & 1 & 1       \\
		flink-core-1.13.0-rc1           		&  1091       &  4   & 0 & 0       \\
		jsonschema2pojo-core-1.1.1           	&  145        &  76  & 1 & 0       \\
		maven-core-3.8.1	           			&  337        &  24  & 0 & 0       \\
		micro-benchmark         		  		&  59         &  43  & 7 & 25       \\
		mybatis-3.5.6         		  			&  1769       &  330 & 3 & 0       \\
		
		quartz-core-2.3.1         	  			&  218     	  &  7   & 0 & 0      \\
		vraptor-core-3.5.5         	  			&  1119       &  565 & 15 & 0      \\
		\bottomrule
		Total        	  						&  6310       &  1084  & 34 & 26    \\
	\end{tabular}
	%	\end{adjustbox}
	\label{tab:mocks}
\end{table*}

\begin{table*}
	\centering
	\caption{Comparison of Number of InstanceInvokeExprs on Mock objects analyzed by Soot and Doop, and Total Number of InstanceInvokeExprs, in each benchmark's test suite. 0 = timed out after 90 minutes.}
	\csvreader[tabular=|r|*{10}{p{9mm}}|,%
	table head=\hline Benchmark & Total Number of Invocations & Mock Invokes intraproc (Soot) 
					& basic-only-intraproc & CI-intraproc & CIPP-intraproc & 1-object-sens-intraproc 
					& basic-only-interproc & CI-interproc & CIPP-interproc & 1-object-sens-interproc\\\hline]%
	{DoopAndSootMockCounts.csv}{}%
	{\csvcoli&\csvcolii&\csvcoliii&\csvcoliv&\csvcolv&\csvcolvi&\csvcolvii&\csvcolviii&\csvcolix&\csvcolx&\csvcolxi}
	\label{tab:invokes}
\end{table*} 


%\begin{table*}
%	\centering
%	\caption{Comparison of Number of InstanceInvokeExprs on Mock objects analyzed by Soot and Doop, and Total Number of InstanceInvokeExprs, in each benchmark's test suite. N/A = timed out after 90 minutes.}
%	%	\begin{adjustbox}{width=0.1\textwidth}
%	\begin{tabular}{lrrrrrr}
%		\toprule
%		Benchmark & \thead{Total Number \\ of Invocations} & \thead{Mock Invokes \\ intraproc (Soot)} & \thead{Basic-only, \\ intraproc (Doop)} & \thead{Context-insensitive, \\ intraproc (Doop)} &  \thead{Basic-only, \\ interproc (Doop)} &\thead{Context-insensitive, \\ interproc (Doop)} \\
%		\midrule
%		bootique-2.0.B1-bootique           		&  3366     &  99   & 99    & 99   & 120   & 122    \\
%		commons-collections4-4.4       			&  12753    &  11   & 0     &  3   & 0    & 23   \\
%		flink-core-1.13.0-rc1           		&  11923    &  40   & 40    & 40   & 1262  & 1389   \\
%		jsonschema2pojo-core-1.1.1      	     	&  1896     &  276  & 282   & 282  & 462   & 604   \\
%		maven-core-3.8.1           			&  4072     &  23   & 23    & 23   & 31    & 39  \\
%		microbenchmark         		  		&  471      &  108  & 123   & 123  & 132   & 132   \\
%		mybatis-3.5.6         		  		&  19232    &  575  & N/A   & 577  &  N/A  & 1345     \\
%		quartz-core-2.3.1       	  		&  3436     &  21   & 21    & 21   & 23    & 31    \\
%		vraptor-core-3.5.51        	  		&  5868     &  942  & 963   & 962  & 1301  & 1630   \\
%		\bottomrule
%		Total        	  				&  63017    & 2095  & N/A   & 2130  & N/A  & 5315   \\
%	\end{tabular}
%	%	\end{adjustbox}
%	\label{tab:invokes}
%\end{table*}

\begin{table*}
	\centering
	\caption{Doop analysis-only runtime after basic-only and context-insensitive base analyses. N/A = timed out after 90 minutes.}
	%	\begin{adjustbox}{width=0.1\textwidth}
	\begin{tabular}{lrrrrrr}
		\toprule
		Benchmark & \thead{Basic-only, \\ intraproc (s)} & \thead{Context-insensitive, \\ intraproc (s)} & \thead{Basic-only, \\ interproc (s)}  & \thead{Context-insensitive, \\ interproc (s)}  \\
		\midrule
		bootique-2.0.B1-bootique           		& 15.71  & 16.81 &  24.26    &  20.20     \\
		commons-collections4-4.4           		& 17.42  & 12.26 &  21.79    &  15.36        \\
		flink-core-1.13.0-rc1           		& 24.67  & 25.30 &  71.67    &  66.10         \\
		jsonschema2pojo-core-1.1.1         		& 25.98  & 26.27 &  42.14    &  39.21         \\
		maven-core-3.8.1   		        	& 18.01  & 16.34 &  25.49    &  22.09          \\
		micro-benchmark         			& 10.97  & 10.50 &  12.51    &  12.53        \\
		mybatis-3.5.6         		  		&  N/A   & 51.25 &   N/A     & 183.86          \\
		quartz-core-2.3.1        	  		& 17.72  & 19.83 &  22.99    &  21.14        \\
		vraptor-core-3.5.5         	  		& 22.10  & 23.81 &  66.73    & 146.09       \\
		\bottomrule
	\end{tabular}
	%	\end{adjustbox}
	\label{tab:doop-runtimes}
\end{table*}